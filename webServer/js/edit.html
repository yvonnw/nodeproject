<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<script src="jquery-3.2.1.min.js"></script>
<script>
$(document).ready(function(){
	//$("#editS").click(function(){
	$("table td").click(function(){
		oldV=$(this).text();
		console.log('parent!!!!!!!!!!!!!!');
		//get the title of the recored that is about to change
		console.log($(this).siblings('th:eq(0)').text());
		var changedTtile = $(this).siblings('th:eq(0)').text();
		document.getElementById('hiddenTitle').value = changedTtile;

		//get the field that is about to changed
		//console.log($(this).siblings());
		//console.log($(this).prevUntil('th:eq(0)'));
		//console.log($(this).prevUntil('th:eq(0)').length);
		var prevLength = $(this).prevUntil('th:eq(0)').length;
		var field = '';
		switch(prevLength)
		{

		case 3:
			field = 'owner';
			break;
		case 2:
			field = 'priority';
			break;
		case 1:
			field = 'status';
			break;
		case 4:
			field = 'deadline';
			break;
		case 5:
			field = 'description';
			break;
		};
		console.log(field);
		document.getElementById('hiddenField').value = field;

	  $(this).addClass('input').html('<input name="changed" value="'+$(this).text()+'"/>').find('input').focus().blur(function(){	  
	 	var newV=$(this).val();
	 	

	  });

	}


	)
});

</script>




<title>Search and Edit</title>
</head>
<form id="searchform" name="form3" method="post" action="/searchStoryTask">
  <label>
  <textarea id="searchbox" name="searchbox"></textarea>
  </label>
  <label>
  <input type="submit" name="Submit" value="Search" />
  </label>

</form>





<form id="resultform" name="form4" method="post" action="/saveChange">
  <table align='left' border='10' cellpadding='10'><caption>Search Result</caption><thead><tr><th><div align='left'>Title</div></th><th><div align='left'>Status</div></th><th><div align='left'>Priority</div></th><th><div align='left'>Owner</div></th><th>Deadline</div></th><th><div align='left'>Description</div></th><th><div align='left'>Edit Save</div></th></tr>
  <tr><form method='post' class= 'editForm' action='/saveChange'>
   <th bgcolor='#BEBEBE' name='editTd'>html story </th>
   <td bgcolor='#BEBEBE' name='editTd1'> 1next html story </td>
   <td bgcolor='#BEBEBE' name='editTd2'> 2next html story </td>
   <td bgcolor='#BEBEBE' name='editTd3'> 3next html story </td>
   <input id="hiddenTitle" type="hidden" name="hiddenTitle"/>
   <th><input id='saveChange' type='submit' value='Save'/></th>
   </tr>
   <tr><form method='post' class= '1editForm' action='/saveChange'>
   <th bgcolor='#BEBEBE' name='1editTd'>__html story </th>
   <td bgcolor='#BEBEBE' name='1editTd1'> 1_next html story </td>
   <td bgcolor='#BEBEBE' name='1editTd2'> 2_next html story </td>
   <td bgcolor='#BEBEBE' name='1editTd3'> 3_next html story </td>
   <input id="hiddenTitle" type="hidden" name="hiddenTitle"/>
   <input id="hiddenField" type="hidden" name="hiddenField"/>
   <th><input id='saveChange' type='submit' value='Save'/></th>
   </tr>
		

</form>


</thead>






</body>
</html>




